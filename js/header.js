window.opon=function(o,s){s=s||"_blank";o=appendParam(o,"from","123.YongAn.org");window.open(o,s)};function appendParam(o,s,e){o=o||"";var n=o.indexOf("?")>-1?"&":"?";if(o.indexOf(s+"=")>-1){s=s+"_YA"}return o+n+s+"="+e}function search(){$(".search-icon").css("opacity","1");var o=-1;var s=0;var e={thisSearch:"https://www.baidu.com/s?wd=",thisSearchIcon:"url('images/search_icon.png')",hotStatus:true,data:[{name:"百度",img:"url('images/search_icon.png') -80px 0px",position:"0px 0px",url:"https://www.baidu.com/s?wd="},{name:"谷歌",img:"url('images/search_icon.png')  -105px 0px",position:"-40px 0px",url:"https://www.google.com/search?q="},{name:"必应",img:"url('images/search_icon.png')  -80px -25px",position:"0px -40px",url:"https://cn.bing.com/search?q="},{name:"好搜",img:"url('images/search_icon.png') -105px -25px",position:"-40px -40px",url:"https://www.so.com/s?q="},{name:"搜狗",img:"url('images/search_icon.png') -80px -50px",position:"0px -80px",url:"https://www.sogou.com/web?query="},{name:"淘宝",img:"url('images/search_icon.png') -105px -50px",position:"-40px -80px",url:"https://s.taobao.com/search?q="},{name:"京东",img:"url('images/search_icon.png') -80px -75px",position:"0px -120px",url:"http://search.jd.com/Search?keyword="},{name:"天猫",img:"url('images/search_icon.png') -105px -75px",position:"-40px -120px",url:"https://list.tmall.com/search_product.htm?q="},{name:"1688",img:"url('images/search_icon.png') -80px -100px",position:"0px -160px",url:"https://s.1688.com/selloffer/offer_search.htm?keywords="},{name:"知乎",img:"url('images/search_icon.png') -105px -100px",position:"-40px -160px",url:"https://www.zhihu.com/search?type=content&q="},{name:"微博",img:"url('images/search_icon.png') -80px -125px",position:"0px -200px",url:"https://s.weibo.com/weibo/"},{name:"B站",img:"url('images/search_icon.png') -105px -125px",position:"-40px -200px",url:"http://search.bilibili.com/all?keyword="},{name:"豆瓣",img:"url('images/search_icon.png') -80px -150px",position:"0px -240px",url:"https://www.douban.com/search?source=suggest&q="},{name:"优酷",img:"url('images/search_icon.png') -105px -150px",position:"-40px -240px",url:"https://so.youku.com/search_video/q_"},{name:"GitHub",img:"url('images/search_icon.png') -80px -175px",position:"0px -280px",url:"https://github.com/search?utf8=✓&q="}]};var n=localStorage.getItem("searchData");if(n){e=JSON.parse(n)}function i(o){var s=$(o).contents().filter(function(o,s){return s.nodeType===3}).text().trim();return s}function t(o){$.ajax({type:"GET",url:"https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su",async:true,data:{wd:o},dataType:"jsonp",jsonp:"cb",success:function(o){$("#box ul").text("");s=o.s.length;if(s){$("#box").css("display","block");for(var n=0;n<s;n++){$("#box ul").append("<li><span>"+(n+1)+"</span> "+o.s[n]+"</li>");$("#box ul li").eq(n).click(function(){var o=i(this);$("#txt").val(o);window.opon(e.thisSearch+o);$("#box").css("display","none")});if(n===0){$("#box ul li").eq(n).css({"border-top":"none"});$("#box ul span").eq(n).css({color:"#fff",background:"#f54545"})}else{if(n===1){$("#box ul span").eq(n).css({color:"#fff",background:"#ff8547"})}else{if(n===2){$("#box ul span").eq(n).css({color:"#fff",background:"#ffac38"})}}}}}else{$("#box").css("display","none")}},error:function(o){console.log(o)}})}$("#txt").keyup(function(o){if($(this).val()){if(o.keyCode==38||o.keyCode==40||!e.hotStatus){return}t($(this).val())}else{$(".search-clear").css("display","none");$("#box").css("display","none")}});$("#txt").keydown(function(n){if(n.keyCode===40){o===s-1?o=0:o++;$("#box ul li").eq(o).addClass("current").siblings().removeClass("current");var t=i($("#box ul li").eq(o));$("#txt").val(t)}if(n.keyCode===38){if(n.preventDefault){n.preventDefault()}if(n.returnValue){n.returnValue=false}o===0||o===-1?o=s-1:o--;$("#box ul li").eq(o).addClass("current").siblings().removeClass("current");var t=i($("#box ul li").eq(o));$("#txt").val(t)}if(n.keyCode===13){window.opon(e.thisSearch+$("#txt").val());$("#box").css("display","none");$("#txt").blur();$("#box ul li").removeClass("current");o=-1}});$("#txt").focus(function(){$(".search-box").css("box-show","inset 0 1px 2px rgba(27,31,35,.075), 0 0 0 0.2em rgba(3,102,214,.3)");if($(this).val()&&e.hotStatus){t($(this).val())}});$("#txt").blur(function(){setTimeout(function(){$("#box").css("display","none")},250)});for(var a=0;a<e.data.length;a++){$(".search-engine-list").append('<li><span style="background:'+e.data[a].img+'"/></span>'+e.data[a].name+"</li>")}$(".search-icon, .search-engine").hover(function(){$(".search-engine").css("display","block")},function(){$(".search-engine").css("display","none")});$("#hot-btn").click(function(){$(this).toggleClass("off");e.hotStatus=!e.hotStatus;localStorage.searchData=JSON.stringify(e)});e.hotStatus?$("#hot-btn").removeClass("off"):$("#hot-btn").addClass("off");$(".search-engine-list li").click(function(){var o=$(this).index();e.thisSearchIcon=e.data[o].position;$(".search-icon").css("background-position",e.thisSearchIcon);e.thisSearch=e.data[o].url;$(".search-engine").css("display","none");localStorage.searchData=JSON.stringify(e)});$(".search-icon").css("background-position",e.thisSearchIcon);$("#search-btn").click(function(){var o=$("#txt").val();if(o){window.opon(e.thisSearch+o);$("#box ul").html("")}else{layer.msg("请输入关键词！",{time:500},function(){$("#txt").focus()})}})}function switchNightMode(){var o=document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/,"$1")||"0";if(o=="0"){document.body.classList.add("night");document.cookie="night=1;path=/";console.log(" ")}else{document.body.classList.remove("night");document.cookie="night=0;path=/";console.log(" ")}}